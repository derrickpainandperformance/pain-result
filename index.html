<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Pain Profile Result | Derrick Hutchinson</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', Georgia, sans-serif;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: radial-gradient(circle, var(--border) 1px, transparent 1px);
    background-size: 28px 28px;
    opacity: 0.4;
    pointer-events: none;
    z-index: 0;
  }

  body.fighter {
    --bg: #0a0a18; --surface: #1a1a2e; --surface2: #16213e;
    --accent: #e94560; --accent2: #c73652;
    --light: #f5f5f5; --muted: #8888aa; --body-color: #c8c8da;
    --border: #2a2a42; --btn-text: #ffffff;
    background-color: var(--bg); color: var(--light);
  }
  body.avoider {
    --bg: #0a1410; --surface: #1b2d2a; --surface2: #132821;
    --accent: #52B788; --accent2: #3d9068;
    --light: #f0f7f4; --muted: #6a8f80; --body-color: #b8d4c8;
    --border: #2a3e38; --btn-text: #0a1410;
    background-color: var(--bg); color: var(--light);
  }
  body.rebuilder {
    --bg: #0e0b18; --surface: #1e1b2e; --surface2: #16132a;
    --accent: #C77DFF; --accent2: #a355e8;
    --light: #f5f0ff; --muted: #7a6a9a; --body-color: #c4b8d8;
    --border: #2e2a42; --btn-text: #0e0b18;
    background-color: var(--bg); color: var(--light);
  }

  /* LOADING */
  .loading-screen {
    position: fixed; inset: 0; background: #0a0a18;
    display: flex; flex-direction: column; align-items: center;
    justify-content: center; z-index: 100;
    transition: opacity 0.5s ease; gap: 20px;
  }
  .loading-screen.hidden { opacity: 0; pointer-events: none; }
  .loading-text {
    font-family: 'DM Sans', sans-serif; font-size: 12px;
    font-weight: 600; letter-spacing: 3px; text-transform: uppercase;
    color: #8888aa;
  }
  .loading-dots { display: flex; gap: 8px; }
  .loading-dots span {
    width: 8px; height: 8px; background: #e94560;
    border-radius: 50%; animation: dotpulse 1.2s ease-in-out infinite;
  }
  .loading-dots span:nth-child(2) { animation-delay: 0.2s; background: #52B788; }
  .loading-dots span:nth-child(3) { animation-delay: 0.4s; background: #C77DFF; }
  @keyframes dotpulse {
    0%,100%{transform:scale(1);opacity:1}
    50%{transform:scale(1.5);opacity:0.5}
  }

  /* SCORE BAR */
  .score-bar-wrapper {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 8px; padding: 28px 32px; margin-bottom: 32px;
  }
  .score-bar-label {
    font-size: 10px; font-weight: 700; letter-spacing: 2px;
    text-transform: uppercase; color: var(--accent); margin-bottom: 10px;
  }
  .score-bar-title {
    font-size: 14px; color: var(--body-color); font-weight: 300;
    margin-bottom: 16px;
  }
  .score-bar-title strong { color: var(--light); font-weight: 600; }
  .score-track {
    width: 100%; height: 8px; background: var(--surface2);
    border-radius: 100px; overflow: hidden; margin-bottom: 10px;
  }
  .score-fill {
    height: 100%; border-radius: 100px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    transition: width 1s ease;
  }
  .score-labels {
    display: flex; justify-content: space-between;
    font-size: 10px; color: var(--muted); font-weight: 300;
  }

  /* PAGE */
  .page {
    position: relative; z-index: 1; max-width: 680px;
    margin: 0 auto; padding: 60px 24px 80px;
    opacity: 0; transform: translateY(16px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .page.visible { opacity: 1; transform: translateY(0); }

  .brand { display: flex; align-items: center; gap: 12px; margin-bottom: 56px; }
  .brand-dot { width: 10px; height: 10px; background: var(--accent); border-radius: 50%; }
  .brand-name { font-size: 12px; font-weight: 600; letter-spacing: 2.5px; text-transform: uppercase; color: var(--muted); }

  .result-badge {
    display: inline-flex; align-items: center; gap: 8px;
    border-radius: 100px; padding: 8px 18px; margin-bottom: 24px;
    border: 1px solid; border-color: color-mix(in srgb, var(--accent) 40%, transparent);
    background: color-mix(in srgb, var(--accent) 12%, transparent);
  }
  .badge-dot { width: 7px; height: 7px; background: var(--accent); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.8)} }
  .badge-text { font-size: 11px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; color: var(--accent); }

  .result-type { font-size: 11px; font-weight: 700; letter-spacing: 3px; text-transform: uppercase; color: var(--accent); margin-bottom: 12px; }
  .hero-title { font-family: 'DM Serif Display', Georgia, serif; font-size: clamp(36px,6vw,52px); color: var(--light); line-height: 1.1; margin-bottom: 20px; }
  .hero-title em { color: var(--accent); font-style: italic; }
  .hero-sub { font-size: 17px; color: var(--body-color); line-height: 1.75; font-weight: 300; max-width: 560px; margin-bottom: 40px; }
  .accent-line { width: 60px; height: 3px; background: var(--accent); border-radius: 2px; margin-bottom: 48px; }

  .card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 8px; padding: 40px; margin-bottom: 32px;
    position: relative; overflow: hidden;
  }
  .card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
  }
  .card-label { font-size: 9px; font-weight: 700; letter-spacing: 3px; text-transform: uppercase; color: var(--accent); margin-bottom: 10px; }
  .card-title { font-family: 'DM Serif Display', Georgia, serif; font-size: 24px; color: var(--light); margin-bottom: 16px; line-height: 1.2; }
  .card-body { font-size: 14px; color: var(--body-color); line-height: 1.85; font-weight: 300; margin-bottom: 14px; }
  .card-body strong { color: var(--light); font-weight: 600; }
  .card-body:last-child { margin-bottom: 0; }

  .quote-block {
    border-left: 3px solid var(--accent); border-radius: 0 6px 6px 0;
    padding: 22px 28px; margin: 32px 0;
    background: color-mix(in srgb, var(--accent) 7%, transparent);
  }
  .quote-text { font-family: 'DM Serif Display', Georgia, serif; font-size: 18px; color: var(--accent); line-height: 1.5; font-style: italic; }

  .insight-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 32px 0; }
  @media (max-width: 520px) { .insight-grid { grid-template-columns: 1fr; } }
  .insight-block { background: var(--surface2); border: 1px solid var(--border); border-radius: 6px; padding: 20px; }
  .insight-icon { font-size: 20px; margin-bottom: 10px; display: block; }
  .insight-label { font-size: 10px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; color: var(--accent); margin-bottom: 6px; }
  .insight-text { font-size: 13px; color: var(--body-color); line-height: 1.65; font-weight: 300; }

  .text-center { text-align: center; }
  .download-btn {
    display: inline-block;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: var(--btn-text) !important; font-family: 'DM Sans', sans-serif;
    font-size: 13px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase;
    text-decoration: none; padding: 18px 44px; border-radius: 3px; transition: opacity 0.2s;
  }
  .download-btn:hover { opacity: 0.88; }
  .download-meta { font-size: 11px; color: var(--muted); margin-top: 12px; font-weight: 300; }

  .call-btn {
    display: inline-block; background: transparent;
    color: var(--accent) !important; font-family: 'DM Sans', sans-serif;
    font-size: 13px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase;
    text-decoration: none; padding: 16px 40px; border-radius: 3px;
    border: 1.5px solid var(--accent); transition: all 0.2s;
  }
  .call-btn:hover { background: var(--accent); color: var(--btn-text) !important; }
  .call-meta { font-size: 11px; color: var(--muted); margin-top: 12px; font-weight: 300; }

  .footer { text-align: center; padding-top: 40px; border-top: 1px solid var(--border); }
  .footer-name { font-family: 'DM Serif Display', Georgia, serif; font-size: 18px; color: var(--light); margin-bottom: 4px; }
  .footer-creds { font-size: 10px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; color: var(--accent); margin-bottom: 4px; }
  .footer-email { font-size: 12px; color: var(--muted); font-weight: 300; }
  .footer-disclaimer { font-size: 10px; color: var(--border); filter: brightness(2); margin-top: 20px; line-height: 1.7; font-weight: 300; }
</style>
</head>
<body>

<div class="loading-screen" id="loadingScreen">
  <div class="loading-dots">
    <span></span><span></span><span></span>
  </div>
  <div class="loading-text">Calculating your result</div>
</div>

<div class="page" id="mainPage">

  <div class="brand">
    <div class="brand-dot"></div>
    <div class="brand-name">Derrick Hutchinson &nbsp;Â·&nbsp; Pain &amp; Performance</div>
  </div>

  <div class="result-badge">
    <div class="badge-dot"></div>
    <div class="badge-text">Your Result Is Ready</div>
  </div>

  <div class="result-type">Your Pain Profile</div>
  <h1 class="hero-title">You Are<br><em id="profileName"></em></h1>
  <p class="hero-sub" id="heroSub"></p>
  <div class="accent-line"></div>

  <!-- SCORE BAR -->
  <div class="score-bar-wrapper">
    <div class="score-bar-label">Your Assessment Score</div>
    <div class="score-bar-title" id="scoreBarTitle"></div>
    <div class="score-track">
      <div class="score-fill" id="scoreFill" style="width:0%"></div>
    </div>
    <div class="score-labels">
      <span>Low psychological factors</span>
      <span>High psychological factors</span>
    </div>
  </div>

  <!-- RESULT CARD -->
  <div class="card">
    <div class="card-label">What This Means</div>
    <div class="card-title" id="cardTitle"></div>
    <p class="card-body" id="cardBody1"></p>
    <p class="card-body" id="cardBody2"></p>
    <div class="quote-block">
      <div class="quote-text" id="quoteText"></div>
    </div>
    <div class="insight-grid">
      <div class="insight-block">
        <span class="insight-icon" id="icon1"></span>
        <div class="insight-label" id="insightLabel1"></div>
        <div class="insight-text" id="insightText1"></div>
      </div>
      <div class="insight-block">
        <span class="insight-icon" id="icon2"></span>
        <div class="insight-label" id="insightLabel2"></div>
        <div class="insight-text" id="insightText2"></div>
      </div>
    </div>
    <p class="card-body" id="cardBody3"></p>
  </div>

  <!-- DOWNLOAD CARD -->
  <div class="card text-center">
    <div class="card-label">Your Free Guide</div>
    <div class="card-title" id="guideTitle"></div>
    <p class="card-body" id="guideSub"></p>
    <br>
    <a href="#" id="downloadBtn" class="download-btn">Download Your Guide â†’</a>
    <div class="download-meta">Free PDF Â· 5 pages Â· Yours to keep</div>
  </div>

  <!-- NEXT STEPS -->
  <div class="card">
    <div class="card-label">Ready to Go Deeper?</div>
    <div class="card-title" id="nextTitle"></div>
    <p class="card-body" id="nextBody"></p>
    <a href="https://calendly.com/derrick-painandperformance" class="call-btn">Book a Free 20-Min Call â†’</a>
    <div class="call-meta">Free Â· No pitch Â· Just a real conversation</div>
  </div>

  <div class="footer">
    <div class="footer-name">Derrick Hutchinson</div>
    <div class="footer-creds">SPT &nbsp;Â·&nbsp; CSCS &nbsp;Â·&nbsp; Pain &amp; Performance</div>
    <div class="footer-email">derrick.painandperformance@gmail.com</div>
    <div class="footer-disclaimer">This page is for educational purposes only and does not constitute medical advice.<br>Please consult a licensed healthcare provider for individualized treatment.</div>
  </div>

</div>

<script>
// â”€â”€ SCORING MAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Each question answer maps to a score 1-4
// Higher score = more fear-avoidance / lower coping

const answerScores = {
  // Q1 â€” Negative Mood
  "not at all â€” my mood and habits have stayed pretty normal": 1,
  "several days â€” i've noticed it but it hasn't changed much": 2,
  "more than half the days â€” it's noticeably affecting my daily life": 3,
  "nearly every day â€” it's significantly disrupting how i feel and function": 4,

  // Q2 â€” Rumination
  "almost never â€” i can usually think about other things": 1,
  "sometimes â€” it pops up but i can move on": 2,
  "often â€” it's regularly on my mind even when i don't want it to be": 3,
  "almost always â€” thoughts about my pain are hard to shake": 4,

  // Q3 â€” Danger appraisal
  "strongly disagree â€” i don't think my pain means something is dangerously wrong": 1,
  "somewhat disagree â€” i'm not sure but i try not to assume the worst": 2,
  "somewhat agree â€” i do worry that something harmful is going on": 3,
  "strongly agree â€” i'm convinced something dangerous is causing my pain": 4,

  // Q4 â€” Catastrophizing
  "not at all hard â€” i can focus on other things fairly easily": 1,
  "slightly hard â€” it takes some effort but i manage": 2,
  "moderately hard â€” pain dominates my thinking during flare-ups": 3,
  "almost impossible â€” i can't seem to keep it out of my mind at all": 4,

  // Q5 â€” Kinesiophobia
  "not at all â€” i stay active and don't fear movement making things worse": 1,
  "a little â€” i'm cautious but still move and exercise": 2,
  "quite a bit â€” i avoid certain movements or activities to protect myself": 3,
  "a great deal â€” i've significantly cut back on physical activity out of fear": 4,

  // Q6 â€” Activity limitation
  "minimally â€” i've adapted and kept doing most things": 1,
  "moderately â€” i've had to cut back but i'm still functioning": 2,
  "significantly â€” pain has forced me to stop things that really matter to me": 3,
  "completely â€” my whole life has been reorganized around avoiding pain": 4,

  // Q7 â€” Pain acceptance
  "i believe i can lead a full, meaningful life even with some pain present": 1,
  "i'm starting to accept that some pain might be part of moving forward": 2,
  "i need to eliminate my pain completely before i can get back to living my life": 3,
  "i haven't thought much about accepting pain â€” i just want it gone": 4,

  // Q8 â€” Self-efficacy
  "very confident â€” i feel capable of managing my pain and staying active": 1,
  "somewhat confident â€” i have good days and bad days but generally cope": 2,
  "not very confident â€” pain has taken a lot from me and i'm unsure i can get it back": 3,
  "not at all confident â€” i feel like my body has let me down and i don't know where to start": 4,
};

// â”€â”€ PROFILE DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const profiles = {
  fighter: {
    theme: 'fighter',
    name: 'The Fighter.',
    heroSub: "You push through. You don't stop. But that same drive is quietly working against you â€” and this guide shows you exactly why, and what to do instead.",
    scoreBarTitle: 'Your score indicates <strong>low fear-avoidance with low pain acceptance</strong> â€” the hallmark of a high-drive, push-through pain pattern.',
    cardTitle: "You've been fighting your pain. It's time to work with it.",
    cardBody1: "You're driven, disciplined, and you refuse to let pain slow you down. The problem? Your body is sending you signals you've learned to override â€” and the gap between what you're pushing through and what your body actually needs is quietly making things worse.",
    cardBody2: "High performers like you often treat pain as weakness rather than information. But here's what the research tells us: <strong>pain is not a sign of damage.</strong> It's a signal from your nervous system â€” and when you consistently override that signal, your nervous system learns to turn the volume up.",
    quote: '"Your values guide your business. Why aren\'t they guiding your health?"',
    icon1: 'âš¡', insightLabel1: "What's Driving It",
    insightText1: "Low pain acceptance + high drive = nervous system overload. Your biggest obstacle is the belief that rest equals failure.",
    icon2: 'ðŸŽ¯', insightLabel2: "Your Lever",
    insightText2: "Learning to separate clean pain (the sensation) from dirty pain (the story) will change everything for you.",
    cardBody3: "You don't need to stop being a high performer. You need to redirect that drive toward <strong>understanding your pain</strong> rather than fighting it.",
    guideTitle: "The Fighter's Pain Reset Guide",
    guideSub: "Your personalized 30-day framework â€” pain science, ACT tools, and a values-based action plan built specifically for how you experience pain.",
    guideLink: "https://drive.google.com/file/d/1Z5ZUpzymfOJS9Y4J3PQvcM9ESd-QjGnw/view?usp=drive_link",
    nextTitle: "You Don't Have to Figure This Out Alone.",
    nextBody: "If this resonated â€” if you're serious about getting back to what matters most with a framework that actually addresses what's driving your pain â€” I'd love to talk. I offer free 20-minute discovery calls for high performers who are ready to stop fighting their pain and start working with it."
  },
  rebuilder: {
    theme: 'rebuilder',
    name: 'The Rebuilder.',
    heroSub: "You're asking better questions now. That means you're ready for a deeper approach â€” one that uses your values as the foundation for lasting recovery. You're closer than you think.",
    scoreBarTitle: 'Your score indicates <strong>a mixed pain profile</strong> â€” a combination of physical and psychological factors that respond well to a values-based approach.',
    cardTitle: "You've sensed there's a deeper layer. You're right.",
    cardBody1: "You've been through enough that you've started asking better questions. You've tried the quick fixes. Maybe you've had good stretches followed by frustrating setbacks. But something in you senses that pain isn't just a physical problem with a purely physical solution.",
    cardBody2: "<strong>That instinct is correct.</strong> The fact that you're here â€” asking what's really driving your pain â€” puts you ahead of most people. You have the self-awareness to do the deeper work, and that's exactly the kind of work that leads to lasting change.",
    quote: '"The goal is not a pain-free life. The goal is a values-full life."',
    icon1: 'ðŸ”¬', insightLabel1: "What's Driving It",
    insightText1: "A mix of physical, psychological, and lifestyle factors. The good news: you're already open to the approach that works best.",
    icon2: 'ðŸ§­', insightLabel2: "Your Lever",
    insightText2: 'Clarifying your values and using them as a compass â€” not "get rid of pain" but "get back to what matters most."',
    cardBody3: 'The shift from <strong>"eliminate pain"</strong> as your goal to <strong>"live by your values"</strong> as your direction changes everything about motivation, resilience, and how you relate to setbacks.',
    guideTitle: "The Rebuilder's Values-Based Recovery Guide",
    guideSub: "Your personalized 30-day framework â€” the biopsychosocial model explained, all 6 ACT core processes, the 80th Birthday values exercise, and a foundation plan built for where you are right now.",
    guideLink: "https://drive.google.com/file/d/1ZicFZL558N28gxwmxni0Zs8rAq3uXIln/view?usp=drive_link",
    nextTitle: "Build on This With Real Support.",
    nextBody: "What you've started here is the foundation of a genuinely different approach to pain â€” one that has your values at the center. If you want to go deeper with personalized guidance â€” pain science education, ACT-based tools, and a clear path back to what matters most â€” I'd love to connect."
  },
  avoider: {
    theme: 'avoider',
    name: 'The Avoider.',
    heroSub: "Your nervous system learned to protect you. Now it's protecting you from the life you actually want. This guide is your gentle, evidence-based path back.",
    scoreBarTitle: 'Your score indicates <strong>elevated fear-avoidance and low self-efficacy</strong> â€” the clearest drivers of chronic pain that keep people stuck.',
    cardTitle: "Your brain built walls to keep you safe. They became your prison.",
    cardBody1: "You've been hurt before â€” and your nervous system learned one very clear lesson: movement and activity equal danger. So it protects you by making pain feel bigger, more threatening, and more permanent than it may actually be.",
    cardBody2: "<strong>This is not weakness.</strong> This is your brain doing exactly what it was designed to do. But the protective response that was meant to keep you safe has gone into overdrive â€” and now it's keeping you from the life you actually want to live.",
    quote: '"What would you do if pain weren\'t in the way â€” and are you willing to start moving toward that, even with pain present?"',
    icon1: 'ðŸ§ ', insightLabel1: "What's Driving It",
    insightText1: "Fear-avoidance and catastrophizing are amplifying your pain signal â€” often more than the physical sensation itself.",
    icon2: 'ðŸŒ±', insightLabel2: "Your Lever",
    insightText2: "Gradual, values-guided re-engagement. Small steps build the evidence your nervous system needs to lower its alarm.",
    cardBody3: "The path forward isn't more rest â€” it's learning that <strong>pain does not equal damage</strong>, and reconnecting with what matters most as your compass back.",
    guideTitle: "The Avoider's Path Back Guide",
    guideSub: "Your personalized 30-day framework â€” breaking the fear-avoidance loop, ACT tools for willingness, and a gentle step-by-step path back to what matters most.",
    guideLink: "https://drive.google.com/file/d/1rhO7O4DC4seBQDsljLwKL-3PvlnZY9Ie/view?usp=drive_link",
    nextTitle: "The Life You Want Is Still Available.",
    nextBody: "The walls pain built around your life are not permanent. They were learned â€” and they can be unlearned. If you want support doing this work with a framework that addresses the root of fear-avoidance â€” not just the symptoms â€” I'd love to connect."
  }
};

// â”€â”€ SCORE DETECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getScoreFromURL() {
  const params = new URLSearchParams(window.location.search);

  // Option 1: Direct profile override (e.g. ?profile=fighter)
  const directProfile = (params.get('profile') || '').toLowerCase();
  if (['fighter','avoider','rebuilder'].includes(directProfile)) {
    return { profile: directProfile, score: null };
  }

  // Option 2: Numeric score passed by Tally (e.g. ?score=22)
  const scoreParam = params.get('score');
  if (scoreParam) {
    const score = parseInt(scoreParam);
    if (score >= 8 && score <= 16)  return { profile: 'fighter',   score };
    if (score >= 17 && score <= 24) return { profile: 'rebuilder', score };
    if (score >= 25 && score <= 32) return { profile: 'avoider',   score };
  }

  // Option 3: Individual answer params passed by Tally
  // Tally can pass each answer as q1=answer&q2=answer etc.
  const answers = [];
  for (let i = 1; i <= 8; i++) {
    const ans = params.get(`q${i}`);
    if (ans) answers.push(ans.toLowerCase().trim());
  }

  if (answers.length > 0) {
    let total = 0;
    answers.forEach(ans => {
      const score = answerScores[ans];
      if (score) total += score;
      else total += 2; // default mid score if answer not matched
    });
    // Fill any missing questions with mid score
    total += (8 - answers.length) * 2;
    if (total >= 8  && total <= 16) return { profile: 'fighter',   score: total };
    if (total >= 17 && total <= 24) return { profile: 'rebuilder', score: total };
    if (total >= 25 && total <= 32) return { profile: 'avoider',   score: total };
  }

  // Default fallback
  return { profile: 'rebuilder', score: null };
}

// â”€â”€ POPULATE PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function populatePage(profileKey, score) {
  const d = profiles[profileKey];
  document.body.className = d.theme;

  document.getElementById('profileName').textContent = d.name;
  document.getElementById('heroSub').textContent = d.heroSub;
  document.getElementById('scoreBarTitle').innerHTML = d.scoreBarTitle;
  document.getElementById('cardTitle').textContent = d.cardTitle;
  document.getElementById('cardBody1').innerHTML = d.cardBody1;
  document.getElementById('cardBody2').innerHTML = d.cardBody2;
  document.getElementById('quoteText').textContent = d.quote;
  document.getElementById('icon1').textContent = d.icon1;
  document.getElementById('insightLabel1').textContent = d.insightLabel1;
  document.getElementById('insightText1').textContent = d.insightText1;
  document.getElementById('icon2').textContent = d.icon2;
  document.getElementById('insightLabel2').textContent = d.insightLabel2;
  document.getElementById('insightText2').textContent = d.insightText2;
  document.getElementById('cardBody3').innerHTML = d.cardBody3;
  document.getElementById('guideTitle').textContent = d.guideTitle;
  document.getElementById('guideSub').textContent = d.guideSub;
  document.getElementById('downloadBtn').href = d.guideLink;
  document.getElementById('nextTitle').textContent = d.nextTitle;
  document.getElementById('nextBody').textContent = d.nextBody;
  document.title = d.name.replace('.','') + ' | Derrick Hutchinson';

  // Animate score bar
  if (score) {
    const pct = ((score - 8) / (32 - 8)) * 100;
    setTimeout(() => {
      document.getElementById('scoreFill').style.width = pct + '%';
    }, 800);
  } else {
    // No score â€” set bar based on profile
    const defaults = { fighter: 25, rebuilder: 50, avoider: 80 };
    setTimeout(() => {
      document.getElementById('scoreFill').style.width = defaults[profileKey] + '%';
    }, 800);
  }
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('DOMContentLoaded', () => {
  const { profile, score } = getScoreFromURL();
  populatePage(profile, score);

  setTimeout(() => {
    document.getElementById('loadingScreen').classList.add('hidden');
    document.getElementById('mainPage').classList.add('visible');
  }, 700);
});
</script>
</body>
</html>
